- name: Install Flatpak for Linux
  become: true
  package:
    name: flatpak
    state: present
  when: ansible_system == "Linux"

- name: Add Flathub remote repository for Linux
  become: true
  command: >-
    flatpak remote-add --if-not-exists flathub
    https://flathub.org/repo/flathub.flatpakrepo
  when: ansible_system == "Linux"

- name: Install Flatpak packages for Linux
  become: true
  community.general.flatpak:
    name: "{{ item }}"
  loop: "{{ flatpak_packages }}"
  when: ansible_system == "Linux"
