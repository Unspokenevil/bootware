- name: Install Caffeine shell extension for GNOME desktop Debian distributions
  apt:
    name: gnome-shell-extension-caffeine
  become: yes
  when: ansible_pkg_mgr == "apt" and linux_desktop in ["gnome", "pop", "ubuntu"]

- name: Install Caffeine shell extension for GNOME desktop Fedora distributions
  become: yes
  dnf:
    name: gnome-shell-extension-caffeine
  when: ansible_pkg_mgr == "dnf" and linux_desktop in ["gnome"]

- name: Enable Caffeine shell extension for GNOME desktops
  become_user: "{{ user_account }}"
  shell:
    cmd: gnome-extensions enable caffeine@patapon.info
  when: >-
    ansible_system == "Linux" and linux_desktop in ["gnome", "pop", "ubuntu"]
