- name: Install Apt packages for Debian distributions
  become: yes
  apt:
    name: "{{ item }}"
  loop: "{{ apt_packages }}"
  when: ansible_pkg_mgr == "apt"

- name: Install DNF packages for Red Hat distributions
  become: yes
  dnf:
    name: "{{ item }}"
  loop: "{{ dnf_packages }}"
  when: ansible_pkg_mgr in ["dnf", "yum"]

- name: Install Homebrew casks for MacOS
  become_user: "{{ user_account }}"
  community.general.homebrew_cask:
    name: "{{ item }}"
    state: present
  loop: "{{ hombrew_casks }}"
  when: ansible_system == "Darwin"

- name: Install Homebrew packages for MacOS
  become_user: "{{ user_account }}"
  community.general.homebrew:
    name: "{{ item }}"
    state: present
  loop: "{{ hombrew_packages }}"
  when: ansible_system == "Darwin"

- name: Install Pacman packages for Arch distributions
  become: yes
  pacman:
    name: "{{ item }}"
  loop: "{{ pacman_packages }}"
  when: ansible_pkg_mgr == "pacman"

- name: Install Scoop packages for Windows
  become_user: "{{ user_account }}"
  community.windows.win_scoop:
    architecture: 64bit
    name: "{{ item }}"
  loop: "{{ scoop_packages }}"
  when: ansible_system == "Windows"

- name: Install Yum packages for Red Hat distributions
  become: yes
  loop: "{{ yum_packages }}"
  when: ansible_pkg_mgr in ["dnf", "yum"]
  yum:
    name: "{{ item }}"
